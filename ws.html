<html>

<head>
  <script type="text/javascript">
    function WebSocketTest() {

      if ("WebSocket" in window) {
        console.log("WebSocket is supported by your Browser!");

        // Let us open a web socket
        // var ws = new WebSocket("ws://ddhub-gateway-dev.energyweb.org/events", 'dsb-protocol');
        var ws = new WebSocket("ws://localhost:3333/events?clientId=hhhhh8jj0:h", 'dsb-protocol');
        ws.onopen = function () {

          // Web Socket is connected, send data using send()
          ws.send(JSON.stringify({
            event: 'message',
            data: 'test',
          }));
          console.log("Message is sent...");
        };

        ws.onmessage = function (evt) {
          var received_msg = evt.data;
          console.log("Message is received..." + received_msg);
        };

        ws.onclose = function (e) {

          // websocket is closed.
          console.log("Connection is closed...");
          console.error(e);
        };
      } else {

        // The browser doesn't support WebSocket
        console.log("WebSocket NOT supported by your Browser!");
      }
    }
    WebSocketTest()
  </script>
  <script src="https://cdn.socket.io/4.3.2/socket.io.min.js"
    integrity="sha384-KAZ4DtjNhLChOB/hxXuKqhMLYvx3b5MlT55xPEiNmREKRzeEm+RVPlTnAn0ajQNs"
    crossorigin="anonymous"></script>
  <!--  <script>-->
  <!--    const socket = io('http://localhost:3333/events');-->
  <!--    console.log("ASD");-->
  <!--    socket.on('connect', function() {-->
  <!--      console.log('Connected');-->

  <!--      socket.emit('events', { test: 'test' });-->
  <!--      socket.emit('identity', 0, response =>-->
  <!--        console.log('Identity:', response),-->
  <!--      );-->
  <!--    });-->
  <!--    socket.on('events', function(data) {-->
  <!--      console.log('event', data);-->
  <!--    });-->
  <!--    socket.on('exception', function(data) {-->
  <!--      console.log('event', data);-->
  <!--    });-->
  <!--    socket.on('disconnect', function() {-->
  <!--      console.log('Disconnected');-->
  <!--    });-->
  <!--  </script>-->
</head>

<body></body>

</html>
